<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <title>yottadb: Module Index</title>
    <link rel="stylesheet" href="../luadoc.css" type="text/css" />
    <!--meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/-->
</head>

<body>
<div id="container">

<div id="product">
    <div id="product_logo"></div>
    <div id="product_name"><big><b></b></big></div>
    <div id="product_description"></div>
</div> <!-- id="product" -->

<div id="main">

<div id="navigation">


<h1>LuaDoc</h1>
<ul>
	
	<li><a href="../index.html">Index</a></li>
	
</ul>


<!-- Module list -->

<h1>Modules</h1>
<ul>

	<li><strong>yottadb</strong></li>
	
</ul>



<!-- File list -->

<h1>Files</h1>
<ul>

	<li>
		<a href="../files/yottadb.html">yottadb.lua</a>
	</li>

</ul>






</div><!-- id="navigation" -->

<div id="content">

<h1>Module <code>yottadb</code></h1>

<p>Lua-bindings for YottaDB.</p>





<h2>Functions</h2>
<table class="function_list">

    <tr>
    <td class="name" nowrap><a href="#data">data</a>&nbsp;(varname, subsarray)</td>
    <td class="summary">Returns information about a variable/node (except intrinsic variables).</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#delete_node">delete_node</a>&nbsp;(varname, subsarray)</td>
    <td class="summary">Deletes a single variable/node.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#delete_tree">delete_tree</a>&nbsp;(varname, subsarray)</td>
    <td class="summary">Deletes a variable/node tree/subtree.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#get">get</a>&nbsp;(varname, subsarray)</td>
    <td class="summary">Gets and returns the value of a variable/node, or `nil` if the variable/node does not exist.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#get_error_code">get_error_code</a>&nbsp;(message)</td>
    <td class="summary">Returns the YDB error code (if any) for the given error message.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#incr">incr</a>&nbsp;(varname, subsarray, increment)</td>
    <td class="summary">Increments the numeric value of a variable/node.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#key">key</a>&nbsp;(varname, subsarray)</td>
    <td class="summary">Creates and returns a new YottaDB key object.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#lock">lock</a>&nbsp;(keys, timeout)</td>
    <td class="summary">Releases all locks held and attempts to acquire all requested locks, waiting if requested.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#lock_decr">lock_decr</a>&nbsp;(varname, subsarray)</td>
    <td class="summary">Decrements a lock on a variable/node, releasing it if possible.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#lock_incr">lock_incr</a>&nbsp;(varname, subsarray, timeout)</td>
    <td class="summary">Attempts to acquire or increment a lock on a variable/node, waiting if requested.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#node_next">node_next</a>&nbsp;(varname, subsarray)</td>
    <td class="summary">Returns the next node for a variable/node, or `nil` if there isn't one.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#node_previous">node_previous</a>&nbsp;(varname, subsarray)</td>
    <td class="summary">Returns the previous node for a variable/node, or `nil` if there isn't one.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#nodes">nodes</a>&nbsp;(varname, subsarray, reverse)</td>
    <td class="summary">Returns an iterator for iterating over all nodes in a variable/node.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#set">set</a>&nbsp;(varname, subsarray, value)</td>
    <td class="summary">Sets the value of a variable/node.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#str2zwr">str2zwr</a>&nbsp;(s)</td>
    <td class="summary">Returns the zwrite-formatted version of the given string.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#subscript_next">subscript_next</a>&nbsp;(varname, subsarray)</td>
    <td class="summary">Returns the next subscript for a variable/node, or `nil` if there isn't one.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#subscript_previous">subscript_previous</a>&nbsp;(varname, subsarray)</td>
    <td class="summary">Returns the previous subscript for a variable/node, or `nil` if there isn't one.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#subscripts">subscripts</a>&nbsp;(varname, subsarray, reverse)</td>
    <td class="summary">Returns an iterator for iterating over all subscripts in a variable/node.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#tp">tp</a>&nbsp;(id, varnames, f, ...)</td>
    <td class="summary">Initiates a transaction.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#transaction">transaction</a>&nbsp;(f)</td>
    <td class="summary">Returns a transaction-safe version of the given function such that it can be called with<br/>YottaDB Transaction Processing.</td>
    </tr>

    <tr>
    <td class="name" nowrap><a href="#zwr2str">zwr2str</a>&nbsp;(s)</td>
    <td class="summary">Returns the string described by the given zwrite-formatted string.</td>
    </tr>

</table>






<br/>
<br/>



<h2><a name="functions"></a>Functions</h2>
<dl class="function">



<dt><a name="data"></a><strong>data</strong>&nbsp;(varname, subsarray)</dt>
<dd>
Returns information about a variable/node (except intrinsic variables).


<h3>Parameters</h3>
<ul>
	
	<li>
	  varname: String variable name.
	</li>
	
	<li>
	  subsarray: Optional list of subscripts.
	</li>
	
</ul>






<h3>Return value:</h3>
yottadb.YDB_DATA_UNDEF (no value or subtree) or<br/>&nbsp&nbspyottadb.YDB_DATA_VALUE_NODESC (value, no subtree) or<br/>&nbsp&nbspyottadb.YDB_DATA_NOVALUE_DESC (no value, subtree) or<br/>&nbsp&nbspyottadb.YDB_DATA_VALUE_NODESC (value and subtree)



</dd>




<dt><a name="delete_node"></a><strong>delete_node</strong>&nbsp;(varname, subsarray)</dt>
<dd>
Deletes a single variable/node.


<h3>Parameters</h3>
<ul>
	
	<li>
	  varname: String variable name.
	</li>
	
	<li>
	  subsarray: Optional list of subscripts.
	</li>
	
</ul>








</dd>




<dt><a name="delete_tree"></a><strong>delete_tree</strong>&nbsp;(varname, subsarray)</dt>
<dd>
Deletes a variable/node tree/subtree.


<h3>Parameters</h3>
<ul>
	
	<li>
	  varname: String variable name.
	</li>
	
	<li>
	  subsarray: Optional list of subscripts.
	</li>
	
</ul>








</dd>




<dt><a name="get"></a><strong>get</strong>&nbsp;(varname, subsarray)</dt>
<dd>
Gets and returns the value of a variable/node, or `nil` if the variable/node does not exist.


<h3>Parameters</h3>
<ul>
	
	<li>
	  varname: String variable name.
	</li>
	
	<li>
	  subsarray: Optional list of subscripts.
	</li>
	
</ul>






<h3>Return value:</h3>
string value or `nil`



</dd>




<dt><a name="get_error_code"></a><strong>get_error_code</strong>&nbsp;(message)</dt>
<dd>
Returns the YDB error code (if any) for the given error message.<br/>Returns `nil` if the message is not a YDB error.


<h3>Parameters</h3>
<ul>
	
	<li>
	  message: String error message.
	</li>
	
</ul>






<h3>Return value:</h3>
numeric YDB error code or nil



</dd>




<dt><a name="incr"></a><strong>incr</strong>&nbsp;(varname, subsarray, increment)</dt>
<dd>
Increments the numeric value of a variable/node.<br/>Raises an error on overflow.


<h3>Parameters</h3>
<ul>
	
	<li>
	  varname: String variable name.
	</li>
	
	<li>
	  subsarray: Optional list of subscripts.
	</li>
	
	<li>
	  increment: Optional string or number amount to increment by.
	</li>
	
</ul>






<h3>Return value:</h3>
the new value



</dd>




<dt><a name="key"></a><strong>key</strong>&nbsp;(varname, subsarray)</dt>
<dd>
Creates and returns a new YottaDB key object.<br/>This key has all of the linked methods below as well as the following fields:<br/>&nbsp&nbsp* name (this key's subscript or variable name)<br/>&nbsp&nbsp* value (this key's value in the YottaDB database)<br/>&nbsp&nbsp* data (see data())<br/>&nbsp&nbsp* has_value (whether or not this key has a value)<br/>&nbsp&nbsp* has_tree (whether or not this key has a subtree)<br/>Calling the key with a string value returns a subscripted key.


<h3>Parameters</h3>
<ul>
	
	<li>
	  varname: String variable name.
	</li>
	
	<li>
	  subsarray: Used internally. Do not set manually. Call the returned key instead to<br/>&nbsp&nbspuse subscripts.
	</li>
	
</ul>




<h3>Usage</h3>
<ul>
	
	<li>yottadb.key('varname')
	
	<li>yottadb.key('varname')('subscript')
	
</ul>



<h3>Return value:</h3>
key



<h3>See also:</h3>
<ul>
	
	<li><a href="../modules/yottadb.html#delete_node">
		delete_node
	</a>
	
	<li><a href="../modules/yottadb.html#delete_tree">
		delete_tree
	</a>
	
	<li><a href="../modules/yottadb.html#get">
		get
	</a>
	
	<li><a href="../modules/yottadb.html#incr">
		incr
	</a>
	
	<li><a href="../modules/yottadb.html#lock">
		lock
	</a>
	
	<li><a href="../modules/yottadb.html#lock_incr">
		lock_incr
	</a>
	
	<li><a href="../modules/yottadb.html#lock_decr">
		lock_decr
	</a>
	
	<li><a href="../modules/yottadb.html#set">
		set
	</a>
	
	<li><a href="../modules/yottadb.html#subscript_next">
		subscript_next
	</a>
	
	<li><a href="../modules/yottadb.html#subscript_previous">
		subscript_previous
	</a>
	
	<li><a href="../modules/yottadb.html#subscripts">
		subscripts
	</a>
	
</ul>

</dd>




<dt><a name="lock"></a><strong>lock</strong>&nbsp;(keys, timeout)</dt>
<dd>
Releases all locks held and attempts to acquire all requested locks, waiting if requested.<br/>Raises an error if a lock could not be acquired.


<h3>Parameters</h3>
<ul>
	
	<li>
	  keys: Optional list of {varname[, subs]} variable/nodes to lock.
	</li>
	
	<li>
	  timeout: Optional timeout in seconds to wait for the lock.
	</li>
	
</ul>








</dd>




<dt><a name="lock_decr"></a><strong>lock_decr</strong>&nbsp;(varname, subsarray)</dt>
<dd>
Decrements a lock on a variable/node, releasing it if possible.


<h3>Parameters</h3>
<ul>
	
	<li>
	  varname: String variable name.
	</li>
	
	<li>
	  subsarray: Optional list of subscripts.
	</li>
	
</ul>








</dd>




<dt><a name="lock_incr"></a><strong>lock_incr</strong>&nbsp;(varname, subsarray, timeout)</dt>
<dd>
Attempts to acquire or increment a lock on a variable/node, waiting if requested.<br/>Raises an error if a lock could not be acquired.


<h3>Parameters</h3>
<ul>
	
	<li>
	  varname: String variable name.
	</li>
	
	<li>
	  subsarray: Optional list of subscripts.
	</li>
	
	<li>
	  timeout: Optional timeout in seconds to wait for the lock.
	</li>
	
</ul>








</dd>




<dt><a name="node_next"></a><strong>node_next</strong>&nbsp;(varname, subsarray)</dt>
<dd>
Returns the next node for a variable/node, or `nil` if there isn't one.


<h3>Parameters</h3>
<ul>
	
	<li>
	  varname: String variable name.
	</li>
	
	<li>
	  subsarray: Optional list of subscripts.
	</li>
	
</ul>






<h3>Return value:</h3>
list of subscripts for the node, or nil



</dd>




<dt><a name="node_previous"></a><strong>node_previous</strong>&nbsp;(varname, subsarray)</dt>
<dd>
Returns the previous node for a variable/node, or `nil` if there isn't one.


<h3>Parameters</h3>
<ul>
	
	<li>
	  varname: String variable name.
	</li>
	
	<li>
	  subsarray: Optional list of subscripts.
	</li>
	
</ul>






<h3>Return value:</h3>
list of subscripts for the node, or nil



</dd>




<dt><a name="nodes"></a><strong>nodes</strong>&nbsp;(varname, subsarray, reverse)</dt>
<dd>
Returns an iterator for iterating over all nodes in a variable/node.


<h3>Parameters</h3>
<ul>
	
	<li>
	  varname: String variable name.
	</li>
	
	<li>
	  subsarray: Optional list of subscripts
	</li>
	
	<li>
	  reverse: Optional flag that indicates whether to iterate backwards. The default value is<br/>&nbsp&nbsp`false`.
	</li>
	
</ul>




<h3>Usage:</h3>
for node_subscripts in yottadb.nodes(varname, subsarray) do ... end



<h3>Return value:</h3>
iterator



</dd>




<dt><a name="set"></a><strong>set</strong>&nbsp;(varname, subsarray, value)</dt>
<dd>
Sets the value of a variable/node.


<h3>Parameters</h3>
<ul>
	
	<li>
	  varname: String variable name.
	</li>
	
	<li>
	  subsarray: Optional list of subscripts.
	</li>
	
	<li>
	  value: String value to set. If this is a number, it is converted to a string.
	</li>
	
</ul>








</dd>




<dt><a name="str2zwr"></a><strong>str2zwr</strong>&nbsp;(s)</dt>
<dd>
Returns the zwrite-formatted version of the given string.


<h3>Parameters</h3>
<ul>
	
	<li>
	  s: String to format.
	</li>
	
</ul>






<h3>Return value:</h3>
formatted string



</dd>




<dt><a name="subscript_next"></a><strong>subscript_next</strong>&nbsp;(varname, subsarray)</dt>
<dd>
Returns the next subscript for a variable/node, or `nil` if there isn't one.


<h3>Parameters</h3>
<ul>
	
	<li>
	  varname: String variable name.
	</li>
	
	<li>
	  subsarray: Optional list of subscripts.
	</li>
	
</ul>






<h3>Return value:</h3>
string subscript name or nil



</dd>




<dt><a name="subscript_previous"></a><strong>subscript_previous</strong>&nbsp;(varname, subsarray)</dt>
<dd>
Returns the previous subscript for a variable/node, or `nil` if there isn't one.


<h3>Parameters</h3>
<ul>
	
	<li>
	  varname: String variable name.
	</li>
	
	<li>
	  subsarray: Optional list of subscripts.
	</li>
	
</ul>






<h3>Return value:</h3>
string subscript name or nil



</dd>




<dt><a name="subscripts"></a><strong>subscripts</strong>&nbsp;(varname, subsarray, reverse)</dt>
<dd>
Returns an iterator for iterating over all subscripts in a variable/node.


<h3>Parameters</h3>
<ul>
	
	<li>
	  varname: String variable name.
	</li>
	
	<li>
	  subsarray: Optional list of subscripts
	</li>
	
	<li>
	  reverse: Optional flag that indicates whether to iterate backwards. The default value is<br/>&nbsp&nbsp`false`.
	</li>
	
</ul>




<h3>Usage:</h3>
for name in yottadb.subscripts(varname, subsarray) do ... end



<h3>Return value:</h3>
iterator



</dd>




<dt><a name="tp"></a><strong>tp</strong>&nbsp;(id, varnames, f, ...)</dt>
<dd>
Initiates a transaction.


<h3>Parameters</h3>
<ul>
	
	<li>
	  id: Optional string transaction id.
	</li>
	
	<li>
	  varnames: Optional list of variable names to restore on transaction restart.
	</li>
	
	<li>
	  f: Function to call. The transaction is committed if the function returns nothing or<br/>&nbsp&nbspyottadb.YDB_OK, restarted if the function returns yottadb.YDB_TP_RESTART (f will be called<br/>&nbsp&nbspagain), or not committed if the function returns yottadb.YDB_TP_ROLLBACK or errors.
	</li>
	
	<li>
	  ...: Optional arguments to pass to f.
	</li>
	
</ul>








</dd>




<dt><a name="transaction"></a><strong>transaction</strong>&nbsp;(f)</dt>
<dd>
Returns a transaction-safe version of the given function such that it can be called with<br/>YottaDB Transaction Processing.


<h3>Parameters</h3>
<ul>
	
	<li>
	  f: Function to convert. The transaction is committed if the function returns nothing<br/>&nbsp&nbspor yottadb.YDB_OK, restarted if the function returns yottadb.YDB_TP_RESTART (f will be<br/>&nbsp&nbspcalled again), or not committed if the function returns yottadb.YDB_TP_ROLLBACK or errors.
	</li>
	
</ul>






<h3>Return value:</h3>
transaction-safe function.



<h3>See also:</h3>
<ul>
	
	<li><a href="../modules/yottadb.html#tp">
		tp
	</a>
	
</ul>

</dd>




<dt><a name="zwr2str"></a><strong>zwr2str</strong>&nbsp;(s)</dt>
<dd>
Returns the string described by the given zwrite-formatted string.


<h3>Parameters</h3>
<ul>
	
	<li>
	  s: String in zwrite format.
	</li>
	
</ul>






<h3>Return value:</h3>
string



</dd>


</dl>






</div> <!-- id="content" -->

</div> <!-- id="main" -->

<div id="about">
    <p><a href="http://validator.w3.org/check?uri=referer"><img src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0!" height="31" width="88" /></a></p>
</div> <!-- id="about" -->

</div> <!-- id="container" -->
</body>
</html>
